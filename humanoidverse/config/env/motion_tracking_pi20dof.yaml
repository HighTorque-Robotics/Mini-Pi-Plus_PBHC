# @package _global_

defaults:
  - legged_base

# Env structure
env:
  _target_: humanoidverse.envs.motion_tracking.motion_tracking_pi20dof.LeggedRobotMotionTracking
  config:
    use_vec_reward: True
    max_episode_length_s: 100000
    termination:
      terminate_by_contact: False
      terminate_by_gravity: True
      terminate_by_low_height: False
      terminate_when_motion_end: True
      terminate_when_motion_far: True
      terminate_when_dof_far: False
      terminate_when_close_to_dof_pos_limit: False
      terminate_when_close_to_dof_vel_limit: False
      terminate_when_close_to_torque_limit: False
    termination_scales:
      termination_min_base_height : 0.05  
      termination_gravity_x : 0.8
      termination_gravity_y : 0.8
      termination_gravity : 0.75
      termination_motion_far_threshold : 0.65  
      termination_close_to_dof_pos_limit : 0.98
      termination_close_to_dof_vel_limit : 0.98
      termination_close_to_torque_limit : 0.98
    termination_probality:
      terminate_when_close_to_dof_pos_limit: 0.25
      terminate_when_close_to_dof_vel_limit: 0.25
      terminate_when_close_to_torque_limit: 0.25
    termination_curriculum:
      terminate_when_motion_far_curriculum: True
      terminate_when_motion_far_initial_threshold: 0.3  
      terminate_when_motion_far_threshold_max: 0.5
      terminate_when_motion_far_threshold_min: 0.3
      terminate_when_motion_far_curriculum_degree: 0.000025
      
      
      terminate_when_motion_far_completion_ratio_down_threshold: 0.93
      terminate_when_motion_far_completion_ratio_up_threshold: 0.98

      terminate_when_dof_far_curriculum:
        enable: True
        init: 3.0
        max: 3.0
        min: 1.0
        degree: 0.000002
        
        
        completion_ratio_down_threshold: 0.93
        completion_ratio_up_threshold: 0.98

    resample_motion_when_training: False
    resample_time_interval_s: 2000

    noise_to_initial_level: 0
    noise_for_sample:
      enable: True
      initial_noise_level: 0.
      degree: 0.00001
      min_noise_level: 0.0
      max_noise_level: 1.0
      completion_ratio_down_threshold: 0.93
      completion_ratio_up_threshold: 0.99

    init_noise_scale: 
      dof_pos: 0.1
      dof_vel: 0.15
      root_pos: 0.05
      root_rot: 10 
      root_vel: 0.01
      root_ang_vel: 0.01

    use_teleop_control: False
    enforce_randomize_motion_start_eval: False

    soft_dynamic_correction:
      enable: False
      alpha: 0.1
      type: "deter" 
      curriculum:
        enable: True
        max_alpha: 0.9
        min_alpha: 0.0
        degree: 0.00001
        
        completion_ratio_down_threshold: 0.93
        completion_ratio_up_threshold: 0.98


log_task_name: motion_tracking

eval_overrides:
  env:
    config: 
      max_episode_length_s: 100000 